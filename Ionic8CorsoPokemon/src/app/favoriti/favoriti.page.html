<app-toolbar pageTitle="Favoriti"></app-toolbar>

<ion-content>
  <div *ngIf="elencoFavoriti$ | async as favoriti; else noFavorites">
    <ion-header collapse="condense">
      <ion-toolbar>
        <ion-title size="large">I tuoi Pokemon preferiti</ion-title>
      </ion-toolbar>
    </ion-header>

    <ion-card *ngIf="favoriti.length > 0">
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="heart" color="danger"></ion-icon>
          {{ favoriti.length }} Pokemon nei preferiti
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-button expand="block" fill="outline" (click)="share()" color="primary">
          <ion-icon name="share-social" slot="start"></ion-icon>
          Condividi la tua lista
        </ion-button>
      </ion-card-content>
    </ion-card>

    <ion-list *ngIf="favoriti.length > 0">
      <ion-item-sliding *ngFor="let pok of favoriti; let i = index" #slidingItem>
        <ion-item-options side="start">
          <ion-item-option color="tertiary" (click)="showPokemonDetails(pok)">
            <ion-icon name="information-circle"></ion-icon>
            Info
          </ion-item-option>
        </ion-item-options>

        <ion-item>
          <ion-avatar slot="start">
            <img [src]="'https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/' + getPokemonId(pok.url) + '.png'" 
                 [alt]="pok.name">
          </ion-avatar>
          <ion-label>
            <h2>{{ pok.name | titlecase }}</h2>
            <p>ID: {{ getPokemonId(pok.url) }}</p>
          </ion-label>
          <ion-icon name="heart" color="danger" slot="end"></ion-icon>
        </ion-item>

        <ion-item-options side="end">
          <ion-item-option color="warning" (click)="confirmRemoveFavorite(pok, slidingItem)">
            <ion-icon name="trash"></ion-icon>
            Rimuovi
          </ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </ion-list>
  </div>

  <ng-template #noFavorites>
    <div class="no-favorites">
      <ion-card>
        <ion-card-content class="ion-text-center">
          <ion-icon name="heart-dislike-outline" size="large" color="medium"></ion-icon>
          <h2>Nessun Pokemon nei preferiti</h2>
          <p>Aggiungi i tuoi Pokemon preferiti dalla pagina principale!</p>
          <ion-button routerLink="/home" fill="outline">
            <ion-icon name="home" slot="start"></ion-icon>
            Vai alla Home
          </ion-button>
        </ion-card-content>
      </ion-card>
    </div>
  </ng-template>
</ion-content>
